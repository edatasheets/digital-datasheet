{
  "$id": "https://github.com/chromeos/digital-datasheets/blob/main/part-spec/power.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "power",
  "oneOf": [
    {
      "title": "switching regulator",
      "type": "object",
      "required": [
        "regulatorTopology",
        "vin",
        "vout",
        "loadCurrent"
      ],
      "properties": {
        "regulatorTopology": {
          "description": "switching voltage regulator topology",
          "examples": [
            "buck",
            "boost",
            "buck-boost",
            "other"
          ],
          "type": "string"
        },
        "vin": {
          "description": "input voltage under which a device can be expected to operate without output dropping",
          "comment": "units of volts",
          "$ref": "unit.json#/unit"
        },
        "vout": {
          "description": "output voltage a device can regulate",
          "comment": "units of volts",
          "$ref": "unit.json#/unit"
        },
        "feedbackVoltage": {
          "description": "voltage comparison point at the feedback node",
          "comment": "units of volts",
          "$ref": "unit.json#/unit"
        },
        "loadCurrent": {
          "description": "load current supported by a device",
          "comment": "units of amps",
          "$ref": "unit.json#/unit"
        },
        "voutAccuracy": {
          "description": "output voltage variation at no load",
          "comment": "units of volts",
          "$ref": "unit.json#/unit"
        },
        "loadRegulation": {
          "description": "output voltage variation from no load to full load ",
          "comment": "units of volts",
          "$ref": "unit.json#/unit"
        },
        "lineRegulation": {
          "description": "output voltage variation from minimum input voltage to maximum input voltage ",
          "comment": "units of volts",
          "$ref": "unit.json#/unit"
        },
        "currentConsumption": {
          "description": "current consumption of a device",
          "comment": "units of amps",
          "$ref": "currentConsumption.json#/currentConsumption"
        },
        "switchingFrequency": {
          "description": "switching frequency (fsw) of voltage regulator",
          "comment": "units of hertz",
          "$ref": "unit.json#/unit"
        },
        "enableTime": {
          "description": "time between enable asserted and output voltage rising to 10% nominal",
          "comment": "units of seconds",
          "$ref": "unit.json#/unit"
        },
        "rampTime": {
          "description": "time for output voltage to go from 10% vout nominal to 90% vout nominal",
          "comment": "units of seconds",
          "$ref": "unit.json#/unit"
        },
        "integratedFets": {
          "description": "whether the regulator contains integrated switching mosfets",
          "type": "boolean"
        },
        "integratedFetProperties": {
          "description": "describes integrated fet current limits and rdson properties",
          "$ref": "#/$defs/powerFetProperties"
        },
        "componentProtectionThresholds": {
          "description": "Thermal and power supply protection thresholds of a device",
          "$ref": "componentProtectionThresholds.json#/componentProtectionThresholds"
        },
        "efficiency": {
          "description": "power efficiency of regulator",
          "$ref": "graph.json#/graph"
        }
      }
    },
    {
      "title": "ldo",
      "type": "object",
      "required": [
        "vin",
        "vout",
        "loadCurrent"
      ],
      "properties": {
        "vin": {
          "description": "input voltage under which the part can be expected to operate without the output dropping",
          "comment": "units of volts",
          "$ref": "unit.json#/unit"
        },
        "vout": {
          "description": "output voltage the part can regulate",
          "comment": "units of volts",
          "$ref": "unit.json#/unit"
        },
        "feedbackVoltage": {
          "description": "voltage comparison point at the feedback node (vref)",
          "comment": "units of volts",
          "$ref": "unit.json#/unit"
        },
        "dropoutVoltage": {
          "description": "dropout voltage of a device",
          "comment": "units of volts",
          "type": "number"
        },
        "loadCurrent": {
          "description": "load current supported by a device",
          "comment": "units of amps",
          "$ref": "unit.json#/unit"
        },
        "currentLimit": {
          "description": "sustained output current threshold beyond which the output of a device starts drooping",
          "comment": "units of amps",
          "$ref": "unit.json#/unit"
        },
        "voutAccuracy": {
          "description": "output voltage variation at no load of a device",
          "comment": "units of volts",
          "$ref": "unit.json#/unit"
        },
        "loadRegulation": {
          "description": "output voltage variation,from no load to full load, of a device ",
          "comment": "units of volts",
          "$ref": "unit.json#/unit"
        },
        "lineRegulation": {
          "description": "output voltage variation,from minimum input voltage to maximum input voltage, of a device ",
          "comment": "units of volts",
          "$ref": "unit.json#/unit"
        },
        "enableTime": {
          "description": "time between enable asserted and output voltage rising to 10% nominal",
          "comment": "units of seconds",
          "$ref": "unit.json#/unit"
        },
        "rampTime": {
          "description": "time for output voltage to go from 10% vout nominal to 90% vout nominal",
          "comment": "units of seconds",
          "$ref": "unit.json#/unit"
        },
        "powerSupplyRejectionRatio": {
          "description": "graph object to capture Power Supply Rejection Ratio (PSRR) of device over various frequencies",
          "$ref": "graph.json#/graph"
        },
        "rmsOutputNoise": {
          "description": "graph object to capture RMS output noise of device over various frequencies",
          "$ref": "graph.json#/graph"
        },
        "totalOutputNoise": {
          "description": "total output noise of a device",
          "$ref": "unit.json#/unit"
        },
        "currentConsumption": {
          "description": "current consumption of a device",
          "$ref": "currentConsumption.json#/currentConsumption"
        },
        "componentProtectionThresholds": {
          "description": "Thermal and power supply protection thresholds of a device",
          "$ref": "componentProtectionThresholds.json#/componentProtectionThresholds"
        }
      }
    },
    {
      "title": "load switch",
      "type": "object",
      "required": [
        "vin",
        "outputCurrent",
        "onResistance"
      ],
      "properties": {
        "fetType": {
          "description": "type of pass FET in a device",
          "enum": [
            "NFET",
            "PFET"
          ],
          "type": "string"
        },
        "loadSwitchCount": {
          "description": "number of load switched in the package.",
          "type": "number"
        },
        "vin": {
          "description": "input voltage under which a device can be expected to reliabily operate",
          "comment": "units of volts",
          "$ref": "unit.json#/unit"
        },
        "outputCurrent": {
          "description": "continuous DC cuurent supported by a device",
          "comment": "units of amps",
          "$ref": "unit.json#/unit"
        },
        "onResistance": {
          "description": "FET on state resistance",
          "comment": "conditions includes vin and output current",
          "$ref": "conditionalProperty.json#/conditionalProperty"
        },
        "pdResistance": {
          "description": "pull-down resistance of a device from the output to the ground",
          "comment": "units of ohms",
          "$ref": "unit.json#/unit"
        },
        "currentLimitSupport": {
          "description": "whether a device supports current limiting",
          "type": "boolean"
        },
        "adjustableRiseTimeSupport": {
          "description": "whether a device supports adjustable rise time",
          "type": "boolean"
        },
        "quickOutputDischargeSupport": {
          "description": "whether a device supports quick output discharge",
          "type": "boolean"
        },
        "reverseCurrentBlockingSupport": {
          "description": "whether a device supports reverse current blocking",
          "type": "boolean"
        },
        "powerGoodSupport": {
          "description": "whether a device supports power good",
          "type": "boolean"
        },
        "enableTime": {
          "description": "time between enable asserted and output voltage rising to 10% nominal",
          "comment": "conditions include output capacitor value, vin",
          "$ref": "conditionalProperty.json#/conditionalProperty"
        },
        "offTime": {
          "description": "time between enable deasserted and output voltage falling to 90% nominal",
          "comment": "conditions include output capacitor value, vin",
          "$ref": "conditionalProperty.json#/conditionalProperty"
        },
        "rampTime": {
          "description": "time for output voltage to go from 10% vout nominal to 90% vout nominal",
          "comment": "conditions include output capacitor value, vin",
          "$ref": "conditionalProperty.json#/conditionalProperty"
        },
        "fallTime": {
          "description": "time for output voltage to go from 90% vout nominal to 10% vout nominal",
          "comment": "conditions include output capacitor value and current output, vin",
          "$ref": "conditionalProperty.json#/conditionalProperty"
        },
        "currentConsumption": {
          "description": "current consumption of a device",
          "$ref": "currentConsumption.json#/currentConsumption"
        },
        "componentProtectionThresholds": {
          "description": "Thermal and power supply protection thresholds of a device",
          "$ref": "componentProtectionThresholds.json#/componentProtectionThresholds"
        }
      }
    },
    {
      "title": "pmic",
      "type": "object",
      "properties": {
        "ldoRegulatorCount": {
          "description": "number of ldos in the device",
          "type": "number"
        },
        "buckRegulatorCount": {
          "description": "number of buck regulators in the device",
          "type": "number"
        },
        "boostRegulatorCount": {
          "description": "number of boost regulators in the device",
          "type": "number"
        },
        "buckBoostRegulatorCount": {
          "description": "number of buck-boost regulators in the device",
          "type": "number"
        },
        "adcCount": {
          "description": "number of analog to digital converters in the device",
          "type": "number"
        },
        "externalClockCount": {
          "description": "number of external clocks the device requires",
          "type": "number"
        },
        "internalClockCount": {
          "description": "number of clocks/oscillators in the device",
          "type": "number"
        },
        "loadSwitchCount": {
          "description": "number of load switches in the device",
          "type": "number"
        },
        "usbSwitchCount": {
          "description": "number of USB switches in the device",
          "type": "number"
        },
        "componentList": {
          "description": "List, by title, of components in the device",
          "comment": "list should only include components with an existing digital datasheet specification",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "instances": {
          "description": "definition of each instance of a component in the device",
          "type": "array",
          "items": {
            "$ref": "#/$defs/powerComponentDefinitions"
          }
        },
        "vin": {
          "description": "input voltage under which a device can be expected to reliabily operate",
          "comment": "units of volts",
          "$ref": "unit.json#/unit"
        },
        "currentConsumption": {
          "description": "current consumption of a device",
          "$ref": "currentConsumption.json#/currentConsumption"
        },
        "componentProtectionThresholds": {
          "description": "Thermal and power supply protection thresholds of a device",
          "$ref": "componentProtectionThresholds.json#/componentProtectionThresholds"
        }
      }
    },
    {
      "title": "display backlight driver",
      "type": "object",
      "required": [
        "iout",
        "vin"
      ],
      "properties": {
        "vin": {
          "description": "input voltage under which a device can be expected to operate properly",
          "comment": "units of volts",
          "$ref": "unit.json#/unit"
        },
        "vout": {
          "description": "output voltage a device can regulate",
          "comment": "units of volts",
          "$ref": "unit.json#/unit"
        },
        "ioutPerString": {
          "description": "output current per string a device can regulate",
          "comment": "units of amps",
          "$ref": "unit.json#/unit"
        },
        "ioutAccuracy": {
          "description": "accuracy of per string current regulated by a device",
          "comment": "units of %",
          "$ref": "unit.json#/unit"
        },
        "fsw": {
          "description": "switching frequency of a device",
          "comment": "units of hertz",
          "$ref": "unit.json#/unit"
        },
        "currentConsumption": {
          "description": "current consumption of a device",
          "$ref": "currentConsumption.json#/currentConsumption"
        },
        "integratedFets": {
          "description": "whether a device contains integrated switching mosfets",
          "type": "boolean"
        },
        "integratedFetProperties": {
          "description": "describes integrated fet current limits and rdson properties",
          "$ref": "#/$defs/powerFetProperties"
        },
        "currentMatchingAccuracy": {
          "description": "current matching between LED strings",
          "comment": "units of percentage",
          "$ref": "unit.json#/unit"
        },
        "dimmingSupport": {
          "description": "whether a device supports output current dimming",
          "type": "boolean"
        },
        "dimmingControl": {
          "description": "whether a device is dimmed by PWM or I2C",
          "type": "string",
          "enum": [
            "i2c",
            "pwm"
          ]
        },
        "dimmingFrequency": {
          "description": "dimming frequency of a device",
          "comment": "units of hertz",
          "$ref": "unit.json#/unit"
        },
        "dimmingRatio": {
          "description": "dimming ratio of a device",
          "$ref": "ratio.json#/ratio"
        },
        "componentProtectionThresholds": {
          "description": "Thermal and power supply protection thresholds of a device",
          "$ref": "icProtection.json#/componentProtectionThresholds"
        },
        "efficiency": {
          "description": "efficiency vs forward current",
          "$ref": "graph.json#/graph"
        }
      }
    },
    {
      "title": "battery charger",
      "type": "object",
      "required": [
        "batteryChargeCurrent"
      ],
      "properties": {
        "chargerType": {
          "description": "battery charger type",
          "examples": [
            "linear",
            "switching",
            "direct"
          ],
          "type": "string"
        },
        "converterType": {
          "description": "switching charger type",
          "examples": [
            "buck",
            "boost",
            "buck-boost"
          ],
          "type": "string"
        },
        "chargerTopology": {
          "description": "type of battery charger topology (Narrow VDC vs Hybrid Power Boost)",
          "enum": [
            "nvdc",
            "hpb"
          ],
          "type": "string"
        },
        "batteryConfig": {
          "description": "battery configuration supported by the device",
          "examples": [
            "1S",
            "2S2P",
            "3S",
            "4S",
            "4S2P"
          ],
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "batteryCellChemistry": {
          "description": "battery cell chemistry supported by the device",
          "examples": [
            "Li-Ion",
            "LiPo"
          ],
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "inputPowerSource": {
          "description": "input power source supported by the device",
          "examples": [
            "adapter",
            "usb pd",
            "usb 5V"
          ],
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "inputCurrentAccuracy": {
          "description": "accuracy of input current when set",
          "comment": "units of %",
          "$ref": "unit.json#/unit"
        },
        "batteryChargeCurrent": {
          "description": "charging current of a device",
          "comment": "units of amps",
          "$ref": "unit.json#/unit"
        },
        "batteryChargeCurrentAccuracy": {
          "description": "charging current regulation accuracy of a device",
          "comment": "units of %",
          "$ref": "unit.json#/unit"
        },
        "batteryPreChargeCurrent": {
          "description": "charging current of a device in pre-charge phase",
          "comment": "units of amps",
          "$ref": "unit.json#/unit"
        },
        "batteryPreChargeCurrentAccuracy": {
          "description": "pre-charging current regulation accuracy of a device",
          "comment": "units of %",
          "$ref": "unit.json#/unit"
        },
        "batteryTrickleChargeCurrent": {
          "description": "charging current of a device in trickle charge phase",
          "comment": "units of amps",
          "$ref": "unit.json#/unit"
        },
        "batteryTrickleChargeCurrentAccuracy": {
          "description": "Trickle charging current regulation accuracy of a device",
          "comment": "units of %",
          "$ref": "unit.json#/unit"
        },
        "batteryTerminationChargeCurrent": {
          "description": "charging current of a device in charge termination phase",
          "comment": "units of amps",
          "$ref": "unit.json#/unit"
        },
        "batteryTerminationChargeCurrentAccuracy": {
          "description": "termination charging current regulation accuracy of a device",
          "comment": "units of %",
          "$ref": "unit.json#/unit"
        },
        "batteryChargeVoltage": {
          "description": "battery charge voltage regulated by a device",
          "comment": "units of volts",
          "$ref": "unit.json#/unit"
        },
        "batteryChargeVoltageAccuracy": {
          "description": "accuracy of battery charge voltage regulated by a device",
          "comment": "units of %",
          "$ref": "unit.json#/unit"
        },
        "efficiency": {
          "description": "charge efficiency vs charge current of a device",
          "$ref": "graph.json#/graph"
        },
        "vin": {
          "description": "input voltage under which a device can be expected to reliabily operate",
          "comment": "units of volts",
          "$ref": "unit.json#/unit"
        },
        "fsw": {
          "description": "switching frequency of a device",
          "comment": "units of hertz",
          "$ref": "unit.json#/unit"
        },
        "currentConsumption": {
          "description": "current consumption of a device",
          "$ref": "currentConsumption.json#/currentConsumption"
        },
        "componentProtectionThresholds": {
          "description": "Thermal and power supply protection thresholds of a device",
          "$ref": "componentProtectionThresholds.json#/componentProtectionThresholds"
        },
        "batteryChargerProtections": {
          "description": "battery charger specific protections supported by device",
          "examples": [
            "adapterOvervoltageProtection",
            "batteryProtection",
            "systemVoltageRailShortProtection"
          ],
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "integratedLoadSwitch": {
          "description": "whether the device contains integrated power path load switch(es)",
          "type": "boolean"
        },
        "integratedFets": {
          "description": "whether the device contains integrated switching mosfets",
          "type": "boolean"
        },
        "integratedFetProperties": {
          "description": "describes integrated fet current limits and rdson properties",
          "$ref": "#/$defs/powerFetProperties"
        },
        "gateCapacitance": {
          "description": "describes gate capacitance supported on external fets",
          "comment": "units of farads",
          "$ref": "unit.json#/unit"
        },
        "inputSenseResistor": {
          "description": "describes intput sense resistor value",
          "comment": "units of ohms",
          "$ref": "unit.json#/unit"
        },
        "batterySenseResistor": {
          "description": "describes battery sense resistor value",
          "comment": "units of ohms",
          "$ref": "unit.json#/unit"
        },
        "passThroughMode": {
          "description": "whether pass through mode is supported",
          "type": "boolean"
        },
        "bc12Support": {
          "description": "whether bc 1.2 detection is built in",
          "type": "boolean"
        },
        "tcpcSupport": {
          "description": "whether type-C port controller support is built in",
          "type": "boolean"
        },
        "usbTypecRevision": {
          "description": "usb type-c spec revision supported by a device",
          "examples": [
            "1.2",
            "1.3"
          ],
          "type": "string"
        },
        "pdVersion": {
          "description": "version of power delivery spec supported by a device",
          "examples": [
            "pd2.0",
            "pd3.1"
          ],
          "type": "string"
        }
      }
    }
  ],
  "$defs": {
    "powerFetProperties": {
      "type": "object",
      "properties": {
        "ilimHSFET": {
          "description": "maximum sustained current output current under which the high side FET will operate properly",
          "comment": "units of amps",
          "$ref": "unit.json#/unit"
        },
        "ilimLSFET": {
          "description": "maximum sustained current output current under which the low side FET will operate properly",
          "comment": "units of amps",
          "$ref": "unit.json#/unit"
        },
        "rdsonHSFET": {
          "description": "high side FET on-resistance",
          "comment": "units of ohms",
          "$ref": "unit.json#/unit"
        },
        "rdsonLSFET": {
          "description": "low side FET on-resistance",
          "comment": "units of ohms",
          "$ref": "unit.json#/unit"
        }
      }
    },
    "powerComponentDefinitions": {
      "type": "object",
      "properties": {
        "componentTitle": {
          "description": "title used for the component in the digital datasheets specifications",
          "type": "string"
        },
        "instanceName": {
          "description": "name of component instances",
          "type": "string"
        },
        "instanceProperties": {
          "description": "definition of the component instance as defined in the specifications",
          "type": "array",
          "items": {
            "type": "object"
          }
        }
      }
    }
  }
}